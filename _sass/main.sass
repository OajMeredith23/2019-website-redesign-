$bg-color: #E8E8E8
$accent: #f3f3f3
$brand-color: #2CD889
$text: #383838

$max-width: 1080px
$padding: 0 1.6%
$margin: 1.6%
$grid-gap: 0.6%
@import "reset"
@import "typography"
@import "nav"
@import "animations"

#__bs_notify__
    opacity: .3
body 
    background: $bg-color

.perlin-background
    pointer-events: none 
    z-index: -5
    position: absolute
    left: 0 
    top: 0 
    right: 0 
    bottom: 0
    width: 100%
    height: 100%
    padding: 0


.main
    max-width: $max-width
    margin: 0 auto
    overflow: hidden

.block 
    padding: 1.6% 1.6%
    margin: 5em 0
    position: relative
    display: flex 
    flex-direction: column
@media(max-width: 967px)
    .header 
        position: relative
        .header-accent
            position: absolute
            top: -250%
            left: 40px
            overflow: hidden
            height: 400%
            z-index: -1
            width: 100%
            background: $brand-color
.see-more 
    width: 140px 
    height: 45px
    border: 5px solid $brand-color
    // border-radius: 5px
    align-self: flex-end
    position: relative
    font-weight: bold

    box-shadow: 3px 6px 6px rgba($text, .1)
    a 
        display: flex 
        justify-content: center
        align-items: center
        text-align: center
        width: 100%
        height: 100% 
        font-size: 16px

.landing-block
    margin-top: $nav-height + 5px
    padding: $padding
    @media(max-width: 960px)
        min-height: 100vh 
        display: flex 
        flex-direction: column
    // .img-container 
    //     height: auto
    //     max-height: 50vh

.img-container
    width: 100%
    height: 75vh
    margin: 0 auto
    background-image: linear-gradient(to bottom right, lighten($text, 60%), $accent)
     
.full-img
    width: 100%
    height: 100%
    object-fit: cover
.align-left 
    object-position: 10%

.big-header 
    font-size: 4em

.body-text 
    max-width: 75%


#work 
    padding-bottom: 100px
$offset-top: 50px

.img-shadow
    position: relative
    z-index: -1
    background: $accent
@media(max-width: 959px)
    .img-shadow 
        position: absolute
        width: 100%
        height: calc(100% + 50px) // + $offset-top // var will not work with calc()
        top: -$offset-top

    .img-shadow_left 
        left: -33%
        box-shadow: 3px 6px 6px rgba(0,0,0,.01)
    .img-shadow_right
        box-shadow: -3px -6px 12px rgba(0,0,0, .01)
        left: 33%
    


.project-landing 
    .img-shadow
        display: none

.project-page
    // max-width: 959px
    margin: 0 auto
.project-section 
    margin-top: 50px
    padding: $padding
    p 
        padding: 3.6% 0
    .img-container
        width: 100%
        margin: 10px 0
       
       
.research-stats
    margin: 50px 0
    min-height: 50vh
    display: flex 
    flex-direction: column
    justify-content: space-around
.stat-item
    display: inline-block
    display: flex 
    justify-content: center 
    align-items: center
    flex-direction: column
    > ul > li, h2
        text-align: center

.footer 
    min-height: 20vh 
    display: flex 
    justify-content: center 
    align-items: center 
    
.lightbox 
    left: 0 
    top: 0
    right: 0 
    bottom: 0
    position: fixed
    z-index: 10 
    pointer-events: none
    display: none
    justify-content: center
    align-items: center
    
        
    &.focused 
        display: flex 
        pointer-events: auto
        background: rgba($text, 0.9)
        
.lightbox-img 
    cursor: pointer
    
.lightbox-target
    max-width: 80vw 
    max-height: 80vh

.lightbox-button
    position: absolute
    top: 10px
    right: 10px
    height: 20px
    width: 20px
    
.lightbox-bg 
    z-index: -1
    position: absolute
    top: 0
    left: 0
    right: 0
    bottom: 0
@media(min-width:960px) 
    @supports(display: grid)

        .main 
            overflow: hidden

    
        .center-viewport
            min-height: 100vh
            display: flex 
            flex-direction: column
            justify-content: center

        .landing-block 
            margin: 0 auto
            padding: 0
            display: grid 
            // grid-gap: $grid-gap
            grid-template-columns: repeat(12, 1fr)
            grid-template-rows: 60vh auto auto

        .big-header 
            font-size: 6em
            grid-row: 1
            grid-column: 1 / -1
            align-self: flex-end

        .landing-img.img-container
            grid-column: 6 / -1
            grid-row: 1
            position: relative
            height: auto
            // z-index: 2

        .profile-img
            position: relative
            z-index: -1
            &::after 
                content: ''
                position: absolute
                border: 10px solid $brand-color
                $border-offset: 20px
                top: $border-offset 
                left: $border-offset
                right: -$border-offset 
                bottom: -$border-offset
                box-shadow: 3px 3px 6px rgba(black, .1)
                // z-index: -1

        .landing-text
            grid-row: 3
            grid-column: 2 / span 5
        
        .block 
            display: grid 
            padding: 0
            grid-template-rows: 40px 50vh minmax(auto, 100px) 40px 40px 40px
            grid-template-columns: repeat(12, 1fr)
            .img-container
                height: 100%
                grid-row: 2

        .img-container_left
            grid-column: 1 / span 9

        .img-container_right
            grid-column: 4 / -1

        .img-shadow 
            grid-row: 1 / -1

        .img-shadow_left
            grid-column: 2 / span 5

        .img-shadow_right
            grid-column: 7 / -2
        .project-list 
            grid-column: 12
            grid-row: 2
            height: 100%
            display: flex 
            flex-direction: column 
            align-items: flex-end
            li 
                writing-mode: vertical-lr
                margin-bottom: 10px
                font-weight: 300
        .header 
            position: relative
            grid-row: 3 
            padding-left: $padding
            transition: .4s ease-out
            h1 
                position: absolute
                bottom: 0 
            &-left 
                grid-column: 1 / span 4
                h1 
                    left: 0
                    margin-right: 33%
            &-right
                grid-column: 9 / -1
                h1 
                    right: 0
                    text-align: right
                    margin-left: 33%

        .see-more 
            grid-column: 6 / span 2 
            grid-row: 5
            height: 100%
            width: 100%
            align-self: flex-end
            position: relative
            background: $brand-color
            border: 1px solid $bg-color
            
        .header-accent
            width: 100%
            height: 200% 
            transform-origin: bottom left
            position: absolute
            z-index: -1
            bottom: 0
            left: -25%
            background: $brand-color
            
            &.animateIn
                // opacity: 0
                transform: scaleX(0.5) translateX(-40px)
                will-change: transform
            &.animate 
                animation: expandWidth .4s ease-out forwards

        .header-left 
            .header-accent
                left: 25% 
                &.animateIn
                    transform-origin: right bottom
            


        

        .project-landing
            grid-template-rows: 40px minmax(100px, 50vh) minmax(100px, 150px)
            .landing-img 
                grid-row: 2
                grid-column: 1 / -1
            .heading
                grid-column: 1 / span 4
                grid-row: 3
                align-self: flex-end
            .landing-text 
                grid-row: 3
                grid-column: 5 / span 3
                align-self: flex-end
            .img-shadow 
                display: block
                grid-row: 1 / -1
                transform: scale(1)
                grid-column: 8 / -2
            h1 
                padding: 0 16px
        .project-section
                padding: 16px
                h1, h2, h3, h4, h5, h6, p
                    padding: 16px 0
                

        @media(min-width:1080px)
            .main 
                overflow: visible
            .project-landing
                h1
                    padding: 0
            .project-section
                padding: 50px 0 0 0 
                h1, h2, h3, h4, h5, h6, p
                    padding:  0 $padding
        

        .research-stats 
            display: flex
            flex-direction: row
            justify-content: space-around
            min-height: auto
        .stat-item 
            width: 200px

        .img-row
            display: grid 
            grid-template-columns: repeat(12, 1fr)
            grid-gap: 0 10px
            padding: 0
            .img-container 
                margin: 0
                grid-column: span 4


            


@media(min-width: 1180px)
    @meida (pointer: fine)

    .total-container 
        display: grid 
        grid-template-columns: 100px 1fr 100px
        margin: 0 auto
        max-width: $max-width + 200px
    .main 
        grid-column: 2

    .sidebar 
        grid-column: 1 

    .landing-space 
        height: 100vh
    .js-portfolio-links 
        z-index: 10
        position: sticky
        margin: 10px 0 0 10px
        padding-top: -10px
        height: 100vh 
        display: flex 
        justify-content: center
        flex-direction: column 
        // align-items: center
        top: 0

    .anchor-link 
        position: relative
        margin: 15px 0
        width: auto
        button 
            width: 10px
            height: 30px
            display: inline
            border-radius: 50px 
            padding: 0 16px
            border: none 
            background: $brand-color
            cursor: pointer
            transform: scale(0.2) 
            opacity: 0
            transition: .3s ease-out .2s
            will-change: transform
        p
            white-space: nowrap
            z-index: 1
            font-weight: bold
            pointer-events: none
            font-size: 16px
            will-change: transform, opacity
            opacity: 0
            transform: translate(-10px, 0)
            transition: .2s ease-out
        &:hover 
            cursor: pointer
            button 
                box-shadow: 3px 6px 6px rgba($text, 0.05)
                background: $brand-color
                width: 25vw
                transition: .2s ease-out
            p 
                opacity: 1
                transform: translate(0, 0)
                transition: .3s ease-out .1s
            @for $i from 1 through 10
                .anchor-delay-#{$i}
                    transition-delay: inherit !important

    &.animate
        button
            opacity: 1
            transform: scale(1)
            transition: .4s ease-out
    @for $i from 1 through 10
        .anchor-delay-#{$i}
            transition-delay: #{$i*0.15}s !important
            
